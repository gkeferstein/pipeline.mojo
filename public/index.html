<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Funnel Pipeline - pipeline.mojo</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="design-system.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <div>
                <h1>Funnel Pipeline</h1>
                <div class="total-value-container">
                    <div class="total-value" id="total-value">Gesamtwert: 0‚Ç¨</div>
                    <div class="progress-info" id="progress-info">Lade...</div>
                    <div class="progress-bar-container" id="progress-bar-container" style="display: none;">
                        <div class="progress-bar" id="progress-bar"></div>
                    </div>
                </div>
                <div class="total-expected-value" id="total-expected-value" style="display: none;">Gesamterwarteter Wert: 0‚Ç¨</div>
            </div>
            <div class="status">
                <span id="lastUpdate">Lade...</span>
            </div>
        </header>
        
        <div class="funnel-container">
            <div class="funnel-column" data-stage="1">
                <div class="column-header">
                    <div class="header-row">
                        <h2>Lead</h2>
                        <span class="count" id="count-1">0</span>
                    </div>
                    <div class="expected-value" id="expected-value-1">Erwarteter Wert: 0‚Ç¨</div>
                </div>
                <div class="cards-container" id="stage-1"></div>
            </div>
            
            <div class="funnel-column" data-stage="2">
                <div class="column-header">
                    <div class="header-row">
                        <h2>Meeting vereinbart</h2>
                        <span class="count" id="count-2">0</span>
                    </div>
                    <div class="expected-value" id="expected-value-2">Erwarteter Wert: 0‚Ç¨</div>
                </div>
                <div class="cards-container" id="stage-2"></div>
            </div>
            
            <div class="funnel-column" data-stage="3">
                <div class="column-header">
                    <div class="header-row">
                        <h2>Follow Up</h2>
                        <span class="count" id="count-3">0</span>
                    </div>
                    <div class="expected-value" id="expected-value-3">Erwarteter Wert: 0‚Ç¨</div>
                </div>
                <div class="cards-container" id="stage-3"></div>
            </div>
            
            <div class="funnel-column" data-stage="4">
                <div class="column-header">
                    <div class="header-row">
                        <h2>Kaufentscheidung</h2>
                        <span class="count" id="count-4">0</span>
                    </div>
                    <div class="expected-value" id="expected-value-4">Erwarteter Wert: 0‚Ç¨</div>
                </div>
                <div class="cards-container" id="stage-4"></div>
            </div>
            
            <div class="funnel-column" data-stage="5">
                <div class="column-header">
                    <div class="header-row">
                        <h2>Kauf</h2>
                        <span class="count" id="count-5">0</span>
                    </div>
                    <div class="expected-value" id="expected-value-5">Realisierter Wert: 0‚Ç¨</div>
                </div>
                <div class="cards-container" id="stage-5"></div>
            </div>
            
            <div class="funnel-column" data-stage="6">
                <div class="column-header">
                    <div class="header-row">
                        <h2>Absage</h2>
                        <span class="count" id="count-6">0</span>
                    </div>
                    <div class="expected-value" id="expected-value-6">Erwarteter Wert: 0‚Ç¨</div>
                </div>
                <div class="cards-container" id="stage-6"></div>
            </div>
        </div>
    </div>
    
    <!-- Kunden-Detail Modal -->
    <div class="modal-overlay" id="customerModal">
        <div class="modal">
            <div class="modal-header">
                <h2 id="modal-customer-name">Kunde</h2>
                <button class="modal-close" id="modalClose">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-customer-info" id="modal-customer-info"></div>
                
                <!-- Tabs -->
                <div class="modal-tabs">
                    <button class="modal-tab active" data-tab="history">üìã Verlauf</button>
                    <button class="modal-tab" data-tab="notes">üìù Notizen</button>
                    <button class="modal-tab" data-tab="move">üîÑ Verschieben</button>
                </div>
                
                <!-- Tab: History -->
                <div class="modal-tab-content active" id="tab-history">
                    <div class="history-list" id="history-list">
                        <p class="loading">Lade Verlauf...</p>
                    </div>
                </div>
                
                <!-- Tab: Notes -->
                <div class="modal-tab-content" id="tab-notes">
                    <div class="notes-form">
                        <textarea id="note-input" placeholder="Neue Notiz eingeben..." rows="3"></textarea>
                        <button class="btn-primary" id="save-note">Notiz speichern</button>
                    </div>
                    <div class="notes-list" id="notes-list">
                        <p class="loading">Lade Notizen...</p>
                    </div>
                </div>
                
                <!-- Tab: Move -->
                <div class="modal-tab-content" id="tab-move">
                    <div class="move-form">
                        <label for="move-stage">Ziel-Stufe:</label>
                        <select id="move-stage">
                            <option value="">Stufe ausw√§hlen...</option>
                            <option value="1">1 - Lead</option>
                            <option value="2">2 - Meeting vereinbart</option>
                            <option value="3">3 - Follow Up</option>
                            <option value="4">4 - Kaufentscheidung</option>
                            <option value="5">5 - Kauf</option>
                            <option value="6">6 - Absage</option>
                        </select>
                        
                        <label for="move-reason">Begr√ºndung (Pflichtfeld):</label>
                        <textarea id="move-reason" placeholder="Grund f√ºr die Verschiebung eingeben..." rows="3"></textarea>
                        
                        <button class="btn-primary" id="move-customer">Karte verschieben</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="app.js"></script>
</body>
</html>

